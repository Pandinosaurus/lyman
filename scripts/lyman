#! /usr/bin/env python
import argparse


def add_subject(parser):
    parser.add_argument("-s", "--subject",
                        nargs="*",
                        metavar="id",
                        help="subject id(s)")


def add_experiment(parser):
    parser.add_argument("-e", "--experiment",
                        metavar="name",
                        help="experiment name")


if __name__ == "__main__":

    parser = argparse.ArgumentParser(prog="lyman")
    subparsers = parser.add_subparsers(help="processing stage",
                                       dest="stage")

    # ---

    preproc = subparsers.add_parser("preproc",
                                    help="functional preprocessing")
    add_subject(preproc)
    add_experiment(preproc)

    # ---

    model = subparsers.add_parser("model",
                                  help="univariate glm")
    add_subject(model)
    add_experiment(model)
    model.add_argument("-m", "--model",
                       metavar="name",
                       help="model name")

    # ---

    args = parser.parse_args()
    print(args)
